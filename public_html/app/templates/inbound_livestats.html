<script>
	_.defer(function (caller) {
		initGeneral();
	}, this);
</script>

<div class="title"><h5>Inbound <span style="margin-left:5px; margin-right:5px">&gt;</span> Live Stats</h5></div>

<div class="widget" style="margin-top:10px;">
	<div class="head">
		<h5 class="iFrames">All Inbound Servers</h5>
		<div class="num"><span>[ 1m ago ]</span></div>
	</div>
	<div class="body" style="padding:0;">
		<table cellpadding="0" cellspacing="0" width="100%" class="tableStatic">
			<thead>
			<tr class="noborder">
				<td width="50%"><strong>Statistic:</strong></td>
				<td align="right"><strong>5s</strong></td>
				<td align="right"><strong>1m</strong></td>
				<td align="right"><strong>5m</strong></td>
				<td align="right"><strong>30h</strong></td>
				<td align="right"><strong>2h</strong></td>
			</tr>
			</thead>
			<tbody>
			<tr>
				<td><strong>Messages Rate:</strong></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Count.totalSec5')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Count.totalMin1')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Count.totalMin5')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Count.totalMin30')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Count.totalHour2')) %></td>
			</tr>
			<tr>
				<td><strong>Avg Messages Size:</strong></td>
				<td align="right"><%= byteFormat(getStat(aggregateStats, 'Inbound.AddMessage_Size.avgSec5.average')) %></td>
				<td align="right"><%= byteFormat(getStat(aggregateStats, 'Inbound.AddMessage_Size.avgMin1.average')) %></td>
				<td align="right"><%= byteFormat(getStat(aggregateStats, 'Inbound.AddMessage_Size.avgMin5.average')) %></td>
				<td align="right"><%= byteFormat(getStat(aggregateStats, 'Inbound.AddMessage_Size.avgMin30.average')) %></td>
				<td align="right"><%= byteFormat(getStat(aggregateStats, 'Inbound.AddMessage_Size.avgHour2.average')) %></td>
			</tr>
			<tr>
				<td><strong>Avg Process Time (ms):</strong></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Time.avgSec5.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Time.avgMin1.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Time.avgMin5.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Time.avgMin30.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddMessage_Time.avgHour2.average')) %></td>
			</tr>
			<tr>
				<td><strong># Oversized Messages:</strong></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddOverSizedMessage_Count.avgSec5.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddOverSizedMessage_Count.avgMin1.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddOverSizedMessage_Count.avgMin5.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddOverSizedMessage_Count.avgMin30.average')) %></td>
				<td align="right"><%= withCommas(getStat(aggregateStats, 'Inbound.AddOverSizedMessage_Count.avgHour2.average')) %></td>
			</tr>
			</tbody>
		</table>
	</div>
</div>

<% _.each(serversByGroupStat("Inbound"), function(server, idx) { %>
	<div class="widget">
		<div class="head">
			<h5 class="iFrames"><%= server.hostname %></h5>
			<div class="num"><span><%= server.workerId %></span></div>
		</div>
		<div class="body" style="padding:0;">
			<table cellpadding="0" cellspacing="0" width="100%" class="tableStatic">
				<thead>
				<tr class="noborder">
					<td width="50%"><strong>Statistic:</strong></td>
					<td align="right"><strong>5s</strong></td>
					<td align="right"><strong>1m</strong></td>
					<td align="right"><strong>5m</strong></td>
					<td align="right"><strong>30h</strong></td>
					<td align="right"><strong>2h</strong></td>
				</tr>
				</thead>
				<tbody>
				<tr>
					<td><strong>Messages Rate:</strong></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddMessage_Count.sec5) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddMessage_Count.min1) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddMessage_Count.min5) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddMessage_Count.min30) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddMessage_Count.hour2) %></td>
				</tr>
				<tr>
					<td><strong>Avg Messages Size:</strong></td>
					<td align="right"><%= byteFormat(server.groupStat.avgStats.AddMessage_Size.sec5.average) %></td>
					<td align="right"><%= byteFormat(server.groupStat.avgStats.AddMessage_Size.min1.average) %></td>
					<td align="right"><%= byteFormat(server.groupStat.avgStats.AddMessage_Size.min5.average) %></td>
					<td align="right"><%= byteFormat(server.groupStat.avgStats.AddMessage_Size.min30.average) %></td>
					<td align="right"><%= byteFormat(server.groupStat.avgStats.AddMessage_Size.hour2.average) %></td>
				</tr>
				<tr>
					<td><strong>Avg Process Time (ms):</strong></td>
					<td align="right"><%= withCommas(server.groupStat.avgStats.AddMessage_Time.sec5.average) %></td>
					<td align="right"><%= withCommas(server.groupStat.avgStats.AddMessage_Time.min1.average) %></td>
					<td align="right"><%= withCommas(server.groupStat.avgStats.AddMessage_Time.min5.average) %></td>
					<td align="right"><%= withCommas(server.groupStat.avgStats.AddMessage_Time.min30.average) %></td>
					<td align="right"><%= withCommas(server.groupStat.avgStats.AddMessage_Time.hour2.average) %></td>
				</tr>
				<tr>
					<td><strong># Oversized Messages:</strong></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddOverSizedMessage_Count.sec5) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddOverSizedMessage_Count.min1) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddOverSizedMessage_Count.min5) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddOverSizedMessage_Count.min30) %></td>
					<td align="right"><%= withCommas(server.groupStat.countStats.AddOverSizedMessage_Count.hour2) %></td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
<% }); %>